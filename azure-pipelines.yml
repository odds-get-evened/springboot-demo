trigger:
  branches:
    include:
      - main
      - dev
      - feature-az_pipelines

stages:
  - stage: Build
    displayName: "build and package"
    jobs:
      - job: BuildJob
        steps:
          - task: Checkout@1
            displayName: "checkout code"
          - task: JavaToolInstaller@1
            inputs:
              versionSpec: '21'
              jdkArchitectureOption: 'x64'
          - script: |
              echo "cleaning up old packages and packaging build with Maven"
              mvn clean package -DskipTests
            displayName: "maven: clean and package build"
          - task: PublishPipelineArtifact@1
            inputs:
              targetPath: '$(System.DefaultWorkingDirectory)/target'
              artifact: 'test_feed'